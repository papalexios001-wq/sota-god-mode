// SOTA TOPIC-AWARE REFERENCE ENGINE\n// Enterprise-grade module for generating semantic-aware, category-specific references\n\nexport interface ReferenceCategory {\n  keywords: string[];\n  authorityDomains: string[];\n  searchModifiers: string[];\n}\n\nexport const REFERENCE_CATEGORIES: Record<string, ReferenceCategory> = {\n  health: {\n    keywords: ['health', 'medical', 'wellness', 'disease', 'therapy', 'treatment'],\n    authorityDomains: ['nih.gov', 'cdc.gov', 'who.int', 'mayoclinic.org', 'healthline.com'],\n    searchModifiers: ['research', 'study', 'clinical', 'peer-reviewed']\n  },\n  fitness: {\n    keywords: ['fitness', 'exercise', 'workout', 'training', 'strength', 'cardio'],\n    authorityDomains: ['acsm.org', 'nsca.com', 'runnersworld.com', 'menshealth.com'],\n    searchModifiers: ['training', 'program', 'guide', 'research']\n  },\n  nutrition: {\n    keywords: ['nutrition', 'diet', 'food', 'supplement', 'vitamin', 'protein'],\n    authorityDomains: ['nutrition.gov', 'eatright.org', 'examine.com', 'usda.gov'],\n    searchModifiers: ['research', 'nutritional data', 'study']\n  },\n  technology: {\n    keywords: ['software', 'hardware', 'tech', 'ai', 'ml', 'programming'],\n    authorityDomains: ['ieee.org', 'acm.org', 'techcrunch.com', 'wired.com'],\n    searchModifiers: ['technical', 'documentation', 'whitepaper']\n  },\n  business: {\n    keywords: ['business', 'marketing', 'finance', 'economy', 'startup'],\n    authorityDomains: ['harvard.edu', 'forbes.com', 'bloomberg.com', 'hbr.org'],\n    searchModifiers: ['report', 'analysis', 'study']\n  },\n  science: {\n    keywords: ['science', 'research', 'biology', 'chemistry', 'physics'],\n    authorityDomains: ['nature.com', 'science.org', 'sciencedirect.com', 'plos.org'],\n    searchModifiers: ['research', 'study', 'peer-reviewed']\n  }\n};\n\nexport const detectCategory = (keyword: string, semanticKeywords: string[]): string => {\n  const allKeywords = [keyword, ...semanticKeywords].map(k => k.toLowerCase()).join(' ');\n  let bestMatch = 'general';\n  let bestScore = 0;\n  \n  for (const [category, config] of Object.entries(REFERENCE_CATEGORIES)) {\n    let score = 0;\n    for (const categoryKeyword of config.keywords) {\n      if (allKeywords.includes(categoryKeyword)) score++;\n    }\n    if (score > bestScore) {\n      bestScore = score;\n      bestMatch = category;\n    }\n  }\n  return bestMatch;\n};\n\nexport const generateReferenceHTML = (\n  references: Array<{ title: string; url: string; source: string }>,\n  category: string,\n  keyword: string\n): string => {\n  if (references.length === 0) return '';\n  \n  const currentYear = new Date().getFullYear();\n  const categoryLabel = category.charAt(0).toUpperCase() + category.slice(1);\n  \n  const listItems = references.map(ref =>\n    `<li class="hover:translate-x-1 transition-transform">\n      <a href="${ref.url}" target="_blank" rel="noopener" class="font-medium text-blue-600">\n        ${ref.title}\n      </a>\n      <span class="ml-2 text-xs bg-slate-100 px-2 py-0.5 rounded">âœ… ${category}</span>\n    </li>`\n  ).join('');\n  \n  return `\n    <div class="sota-references-section my-12 p-8 bg-gradient-to-br from-slate-50 to-blue-50 border rounded-2xl">\n      <h3 class="text-xl font-bold text-slate-800 mb-6">\n        ðŸ“š Trusted ${categoryLabel} References\n      </h3>\n      <ul class="grid grid-cols-1 md:grid-cols-2 gap-4 list-none">${listItems}</ul>\n      <p class="mt-4 text-xs text-slate-500 italic">\n        Verified ${category} sources for \"${keyword}\" (${currentYear})\n      </p>\n    </div>\n  `;\n};
